{% load static %}

<style>
.slider-section {
    width: 100vw;
    height: 60vh;
    position: relative;
    overflow: hidden;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
}

.carousel {
    width: 100%;
    height: 100%;
}

.carousel-inner {
    position: relative;
    width: 100%;
    height: 100%;
}

.carousel-item {
    position: absolute;
    top: 0;
    left: 0;
    display: block;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 2.5s linear;
    z-index: 0;
}

.carousel-item.active {
    opacity: 1;
    z-index: 1;
}

.carousel-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.carousel-caption {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 900px;
    width: 90%;
    padding: 0 1rem;
    padding-bottom: 3rem;
    pointer-events: auto;
}

@media (max-width: 768px) {
    .carousel-caption {
        text-align: center !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
    }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const carouselElement = document.querySelector('#carouselExampleAutoplaying');
    const items = carouselElement.querySelectorAll('.carousel-item');
    let currentIndex = 0;
    const transitionTime = 10000; // 10 seconds

    function showNextSlide() {
        items[currentIndex].classList.remove('active');
        currentIndex = (currentIndex + 1) % items.length;
        items[currentIndex].classList.add('active');
    }

    setInterval(showNextSlide, transitionTime);
});
</script>

<section id="slider-section" class="slider-section">
    <div id="carouselExampleAutoplaying" class="carousel">

        <div class="carousel-inner">
            {% for item in carousel_items %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                <picture>
                    {% if item.mobile_image %}
                        <source srcset="{{ item.mobile_image.url }}" media="(max-width: 768px)">
                    {% endif %}
                    <img src="{{ item.image.url }}" class="d-block w-100 img-fluid" alt="{{ item.title }}">
                </picture>

                {% if item.text_alignment == 'left' %}
                    <div class="carousel-caption text-start">
                {% elif item.text_alignment == 'right' %}
                    <div class="carousel-caption text-end">
                {% else %}
                    <div class="carousel-caption text-center">
                {% endif %}
                        <h1 class="display-1 fw-bolder text-capitalize mb-4" style="color:white;">
                            {{ item.title|safe }}
                        </h1>
                        {% if item.subtitle %}
                            <p class="fs-3 spaced-paragraph mb-4">{{ item.subtitle|safe }}</p>
                        {% endif %}
                    </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
